#!/usr/bin/env python
# -*- coding: utf-8
from __future__ import absolute_import

import six
import datetime

from k8s.base import Model
from k8s.fields import Field, ListField
{% for import in module.imports %}
from k8s.models.{{ version }}.{{ import.module.ref }} import {{ import.names|join(", ") }}
{% endfor %}

{% for model in module.models %}

class {{ model.definition.name }}(Model):
    """
    {{ model.definition.description|replace('"', '\'')|wordwrap|indent }}
    """
{% if model.operations %}
    class Meta:
{% for operation in model.operations %}
        {{ operation.action }}_url = "{{ operation.path }}"
{% endfor %}
    
{% endif %}
{% if model.definition.gvks %}
{% set gvk = model.definition.gvks[-1] %}
    apiVersion = Field(six.text_type, "{{ [gvk.group, gvk.version]|select|join("/") }}")
    kind = Field(six.text_type, "{{ gvk.kind }}")
{% endif %}

{% for field in model.definition.fields|rejectattr("name", "in", ("apiVersion", "kind"))|sort %}
    {{ field.name }} = {{ field.cls }}({{ field.type.name }}{% if field.alt_type %}, alt_type={{ field.alt_type.name }}{% endif %})
{% else %}
    # Model has no fields
{% endfor %}

{% endfor %}
