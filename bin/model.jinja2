#!/usr/bin/env python
# -*- coding: utf-8
from __future__ import absolute_import

import six

from k8s.base import Model
from k8s.fields import Field
{% for import in module.imports %}
from k8s.models.{{ import.module.ref }} import {{ import.names|join(", ") }}
{% endfor %}

{% for model in module.models %}

class {{ model.definition.name }}(Model):
    """
    {{ model.definition.description|replace('"', '\'')|wordwrap|indent }}
    """
{% if model.definition.gvks %}
{% set gvk = model.definition.gvks[-1] %}
    apiVersion = Field(six.text_type, "{{ [gvk.group, gvk.version]|select|join("/") }}")
    kind = Field(six.text_type, "{{ gvk.kind }}")
{% endif %}

{% for field in model.definition.fields|rejectattr("name", "in", ("apiVersion", "kind"))|sort %}
    {{ field.name }} = Field({{ field.type.name }})
{% endfor %}

{% endfor %}
